define(["dojo/dom","dijit/registry","modules/HashController","esri/urlUtils","views/map/MapConfig","modules/EventsController","views/blog/BlogModel","dojo/Deferred","dojo/_base/array"],function(o,e,i,n,r,t,s,l,u){var a={},d=!1,f="blogView",h={viewId:f,viewName:"blog"};return a.addConfigurations=function(){var o=r.proxies,e=document.location.href,i="/proxy/proxy.ashx";for(var n in o)0===e.indexOf(n)&&(i=o[n]);esri.config.defaults.io.proxyUrl=i},a.init=function(){a.addConfigurations();return d?void t.switchToView(h):(d=!0,void require(["dojo/text!views/blog/blog.html"],function(e){var i=a.loadFeed(esri.config.defaults.io.proxyUrl);i.then(function(i){var n=JSON.parse(i);a.addPosts(n),o.byId(f).innerHTML=e,t.switchToView(h),s.applyBindings(f)},function(){console.log("There was an error in binding")})}))},a.loadFeed=function(o){var e=new l;return require(["views/blog/BlogLoader"],function(i){var n=i.load_feed(o);n.then(function(o){e.resolve(o)},function(){console.dir("error")})}),e.promise},a.addPosts=function(o){console.log(o),o.articles.forEach(function(o){o.getAuthors=function(){var o=this.author.split(","),e=[];return u.forEach(o,function(i,n){if(0==n&&2!=o.length)e.push("by"),e.push(i.substring(3,i.length));else if(2==o.length&&0==n){var r=i.split("-");e.push("by"),e.push(r[0].substring(3,i.length)),e.push(r[1].trim()+o[n+1])}else if(n==o.length-2){var r=o[n].split("and");e.push(r[0].trim()),e.push("and");var t=r[1].split("-");e.push(t[0].trim()),e.push(t[1]+o[n+1])}else n==o.length-1||e.push(i.trim())}),e}}),s.vm.blogPost.push(o)},a});