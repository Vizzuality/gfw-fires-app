define(["knockout","main/Config","dojo/dom","dojo/_base/array","dojo/topic"],function(e,t,o,r,a){var i={};i.vm={};var n=i.vm;return n.headerTitle=e.observable(t.headerTitle),n.newStoryTitle=e.observable(t.newStory.title),n.storiesURL="http://gis-potico.wri.org/arcgis/rest/services/Fires/fire_stories/FeatureServer/0",n.localToken="?token=zUZRyzIlgOwnnBIAdoE5CrgOjZZqr8N3kBjMlJ6ifDM7Qm1qXHmiJ6axkFWndUs2",n.stagingToken="?token=VxQtCpXFzeqeopOOLVgG5dfpUHE7pEkcrJTO6nCCtrG5IL3houSHy4WQiFaY4c8L",n.productionToken="?token=BvwcoIq9AJ04z_pusnxTw-awCMGU93bMurQ44KpDNwc0w0vyjsE9Gk8WZAtqkagp",n.addButtonLabel="Add Point",n.removeButtonLabel="Remove Point",n.storyTitleData=e.observable(),n.pointGeom=e.observable(),n.storyLocationData=e.observable(),n.dateObserv=e.observable(),n.storyDetailsData=e.observable(),n.storyVideoData=e.observable(),n.storyMediaData=e.observable(),n.storyNameData=e.observable(),n.storyEmailData=e.observable(),n.showBasemapGallery=e.observable(!1),n.stopSubmissionText="Wait! Both a Title and a valid email are required to submit your story.",n.formInvalidText="The email and/or the video url you provided is invalid.",n.noMapPoint="Please place a point on the map to represent your story!",n.submitSuccess="Your story was successfully submitted! You will now be redirected to the map to view your submission.",n.submitFailure="An error occured during the submission process.",n.attachSuccess="The attachment you selected was successfully added to the Story!",n.attachFailure="The attachment you selected could not be added to the Story",n.inputFilesSelector=e.observableArray([{display:!0}]),n.mediaListData=function(e,t){return t&&$(t.target.nextSibling.nextSibling).append(t.currentTarget.files[0].name),t},n.linkClick=function(e){a.publish("toggleStoryNavList",e)},n.datePicker=function(){var e=(jQuery("#storyDateInput").datepicker({minDate:new Date(2013,0,1),maxDate:"+0M +0D",onSelect:function(e){return n.dateObserv(e),e}}),new Date),t=e.getDate(),o=e.getMonth()+1,r=e.getFullYear(),a=o+"/"+t+"/"+r;return a},n.uploadStory=function(e,t){require(["views/story/StoryController"],function(o){o.handleUpload(e,t)})},n.mediaChange=function(e,t){require(["views/story/StoryController"],function(o){o.handleFileChange(e,t)})},n.attachmentRemove=function(e,t){require(["views/story/StoryController"],function(o){o.handleAttachmentRemove(e,t)})},n.mouseoverFile=function(e,t){$(t.target).children("img").remove(),$(t.target).append('<img id="theImg" src="app/images/redX.png" />')},n.mouseoutFile=function(e,t){$(t.target).children("img").remove()},i.get=function(e){return"model"===e?i.vm:i.vm[e]()},i.set=function(e,t){i.vm[e](t)},i.getVM=function(){return n},i.applyBindings=function(t){e.applyBindings(n,o.byId(t))},i});