define(["knockout","dijit/registry","dijit/Dialog","main/Config","views/map/MapConfig","dojo/dom"],function(e,a,t,o,r,n){var i={};i.vm={};var s=i.vm;s.appState=e.observable({}),s.locatorContainerHeader=e.observable(r.text.locatorContainerHeader),s.alertToolboxHeader=e.observable(r.text.alertToolboxHeader),s.locatorSearchLabel=e.observable(r.text.locatorSearchLabel),s.dmsSearch=e.observable(r.text.dmsSearch),s.latLongSearch=e.observable(r.text.latLongSearch),s.degreesLabel=e.observable(r.text.degreesLabel),s.minutesLabel=e.observable(r.text.minutesLabel),s.secondsLabel=e.observable(r.text.secondsLabel),s.latitudeLabel=e.observable(r.text.latitudeLabel),s.longitudeLabel=e.observable(r.text.longitudeLabel),s.searchOptionGoButton=e.observable(r.text.searchOptionGoButton),s.clearSearchPins=e.observable(r.text.clearSearchPins),s.legend=e.observable(r.text.legend),s.firesCheckbox=e.observable(r.text.firesCheckbox),s.noaaFiresCheckbox=e.observable(r.text.noaaFiresCheckbox),s.noaaSubLabel=e.observable(r.text.noaaSubLabel),s.indonesiaFiresCheckbox=e.observable(r.text.indonesiaFiresCheckbox),s.indonesiaSubLabel=e.observable(r.text.indonesiaSubLabel),s.firesSubLabel=e.observable(r.text.firesSubLabel),s.confidenceFiresCheckbox=e.observable(r.text.confidenceFiresCheckbox),s.activateSmartCheckbox=e.observable(r.text.activateSmartCheckbox),s.firesWeek=e.observable(r.text.firesWeek),s.fires72=e.observable(r.text.fires72),s.fires48=e.observable(r.text.fires48),s.fires24=e.observable(r.text.fires24),s.none=e.observable(r.text.none),s.oilPalmCheckbox=e.observable(r.text.oilPalmCheckbox),s.rspoOilPalmCheckbox=e.observable(r.text.rspoOilPalmCheckbox),s.woodFiberCheckbox=e.observable(r.text.woodFiberCheckbox),s.loggingCheckbox=e.observable(r.text.loggingCheckbox),s.protectedAreasCheckbox=e.observable(r.text.protectedAreasCheckbox),s.indicativeMoratoriumCheckbox=e.observable(r.text.indicativeMoratoriumCheckbox),s.burnedScarsCheckbox=e.observable(r.text.burnedScarsCheckbox),s.tomnodCheckbox=e.observable(r.text.tomnodCheckbox),s.disableAirQuality=!0,s.peatLandsRadio=e.observable(r.text.peatLandsRadio),s.treeCoverDensityRadio=e.observable(r.text.treeCoverDensityRadio),s.primaryForestsRadio=e.observable(r.text.primaryForestsRadio),s.southeastLandCoverRadio=e.observable(r.text.southeastLandCoverRadio),s.peatLandsSubLabel=e.observable(r.text.peatLandsSubLabel),s.treeCoverDensitySubLabel=e.observable(r.text.treeCoverDensitySubLabel),s.southeastLandCoverSubLabel=e.observable(r.text.southeastLandCoverSubLabel),s.forestUseCheckboxSubLabelSelect=e.observable(r.text.forestUseCheckboxSubLabelSelect),s.rspoOilPalmCheckboxSubLabel=e.observable(r.text.rspoOilPalmCheckboxSubLabel),s.primaryForestsSubLabel=e.observable(r.text.primaryForestsSubLabel),s.conservationCheckboxSubLabelGlobal=e.observable(r.text.conservationCheckboxSubLabelGlobal),s.indicativeMoratoriumCheckboxSubLabel=e.observable(r.text.indicativeMoratoriumCheckboxSubLabel),s.indicativeMoratoriumCheckboxSubLabel2=e.observable(r.text.indicativeMoratoriumCheckboxSubLabel2),s.airQuality=e.observable(r.text.airQuality),s.digitalGlobeCheckbox=e.observable(r.text.digitalGlobeCheckbox),s.digitalGlobeFootprintsCheckbox=e.observable(r.text.digitalGlobeFootprintsCheckbox),s.landsatImageCheckbox=e.observable(r.text.landsatImageCheckbox),s.landsatImageSubLabel=e.observable(r.text.landsatImageSubLabel),s.twitterConversationsCheckbox=e.observable(r.text.twitterConversationsCheckbox),s.fireStoriesCheckbox=e.observable(r.text.fireStoriesCheckbox),s.transparencySliderLabel=e.observable(r.text.transparencySliderLabel),s.alertErrorMessages=e.observableArray([]),s.showAlertErrorMessages=e.observable(!1),s.smartRendererName=e.observable("Choose one"),s.customFeatureName=e.observable("Drawn/Uploaded Feature"),s.customFeaturesArray=e.observableArray([]),s.getReportLink=e.observable(r.text.getReportLink),s.getDates=e.observable(r.text.getDates),s.windyLayerCheckbox=e.observable(r.text.windyLayerCheckbox),s.windySubLabelAdvice=e.observable(r.text.windySubLabelAdvice),s.windySubLabel=e.observable(r.text.windySubLabel),s.provincesCheckbox=e.observable(r.text.provincesCheckbox),s.districtsCheckbox=e.observable(r.text.districtsCheckbox),s.subDistrictsCheckbox=e.observable(r.text.subDistrictsCheckbox),s.digitalGlobeSubLabel=e.observable(r.text.digitalGlobeSubLabel),s.digitalGlobeFootprintsSubLabel=e.observable(r.text.digitalGlobeFootprintsSubLabel),s.villagesCheckbox=e.observable(r.text.villagesCheckbox),s.pf2000Radio=e.observable(r.text.pf2000Radio),s.pf2005Radio=e.observable(r.text.pf2005Radio),s.pf2010Radio=e.observable(r.text.pf2010Radio),s.pf2012Radio=e.observable(r.text.pf2012Radio),s.imageIconPath=e.observable(r.text.imageSourcePath),s.timeOfDay=e.observable("00"),s.wind00Radio=e.observable("00"),s.wind06Radio=e.observable("06"),s.wind12Radio=e.observable("12"),s.wind18Radio=e.observable("18"),s.wind00Enable=e.observable(),s.wind06Enable=e.observable(),s.wind12Enable=e.observable(),s.wind18Enable=e.observable(),s.windDisabledDates=["2015-01-15"],s.customFeaturesPresence=e.observable(!1),s.currentFireTime=e.observable("firesWeek"),s.triggerFireLayerInfo=function(e,o){var r=o.currentTarget.id;r=r.split("-icon")[0],require(["dojo/text!views/data/templates/dataFires.htm"],function(e){var o=$(e).find("#"+r).parent();if(0!==o.length){var n;"dataForestChange-1"===r?n="NASA ACTIVE FIRES":"dataForestChange-3"===r?n="NOAA-18 FIRES":"dataForestChange-2"===r&&(n="BURN SCARS");var i=o.find(".ac-auto");a.byId("fireLayerInfoDialog")&&a.byId("fireLayerInfoDialog").destroy();var s=new t({title:n,style:"width: 600px",id:"fireLayerInfoDialog",content:i});s.show()}})},s.triggerLandUseLayerInfo=function(e,o){var r=o.currentTarget.id;r=r.split("-icon")[0],require(["dojo/text!views/data/templates/dataForestUse.htm"],function(e){var o=$(e).find("#"+r).parent();if(0!==o.length){var n;"dataLandUse-1"===r?n="LOGGING":"dataLandUse-3"===r?n="OIL PALM":"dataLandUse-4"===r?n="WOOD FIBER PLANTATION":"dataLandUse-5"===r&&(n="RSPO CONCESSIONS");var i=o.find(".ac-auto");a.byId("landUseLayerInfoDialog")&&a.byId("landUseLayerInfoDialog").destroy();var s=new t({title:n,style:"width: 600px",id:"landUseLayerInfoDialog",content:i});s.show()}})},s.triggerConservationLayerInfo=function(e,o){var r=o.currentTarget.id;r=r.split("-icon")[0],require(["dojo/text!views/data/templates/dataConservation.htm"],function(e){var o=$(e).find("#"+r).parent();if(0!==o.length){var n=o.find(".ac-auto");a.byId("conservationLayerInfoDialog")&&a.byId("conservationLayerInfoDialog").destroy();var i=new t({title:"PROTECTED AREAS",style:"width: 600px",id:"conservationLayerInfoDialog",content:n});i.show()}})},s.triggerLandCoverLayerInfo=function(e,o){var r=o.currentTarget.id;r=r.split("-icon")[0],require(["dojo/text!views/data/templates/dataLandCover.htm"],function(e){var o=$(e).find("#"+r).parent();if(0!==o.length){var n;"dataForestAndLandCover-1"===r?n="<label for='dataForestAndLandCover-1' class='source_title'><span class='metadataTitle'>Tree Cover Density</span><em class='source_description'>(year 2000, 30m global, Hansen/UMD/Google/USGS/NASA)</em></label>":"dataForestAndLandCover-8"===r?n="PRIMARY FORESTS":"dataForestAndLandCover-3"===r&&(n="PEAT LANDS");var i=o.find(".ac-auto");a.byId("landCoverLayerInfoDialog")&&a.byId("landCoverLayerInfoDialog").destroy();var s=new t({title:n,style:"width: 600px",id:"landCoverLayerInfoDialog",content:i});s.show()}})},s.triggerAirQualityLayerInfo=function(e,o){var r=o.currentTarget.id;r=r.split("-icon")[0],require(["dojo/text!views/data/templates/dataAirQuality.htm"],function(e){var o=$(e).find("#"+r).parent();if(0!==o.length){var n;"dataSuitability-1"===r?n="AIR QUALITY":"dataSuitability-2"===r&&(n="WIND DIRECTION");var i=o.find(".ac-auto");a.byId("airQualityLayerInfoDialog")&&a.byId("airQualityLayerInfoDialog").destroy();var s=new t({title:n,style:"width: 600px",id:"airQualityLayerInfoDialog",content:i});s.show()}})},s.triggerImageryLayerInfo=function(e,o){var r=o.currentTarget.id;r=r.split("-icon")[0],require(["dojo/text!views/data/templates/dataImagery.htm"],function(e){var o=$(e).find("#"+r).parent();if(0!==o.length){var n;"dataPolicy-1"===r?n="DIGITAL GLOBE â€“ FIRST LOOK IMAGERY":"dataPolicy-2"===r&&(n="LANDSAT 8 PAN-SHARPENED");var i=o.find(".ac-auto");a.byId("imageryLayerInfoDialog")&&a.byId("imageryLayerInfoDialog").destroy();var s=new t({title:n,style:"width: 600px",id:"imageryLayerInfoDialog",content:i});s.show()}})},s.clearCustomFeatures=function(){require(["views/map/MapController"],function(e){e.removeCustomFeatures()})},s.wind00Disable=function(){var e=new Date,a=(new Date,e.getHours(),moment(e));if(e=a.tz("Atlantic/Cape_Verde").format("ha z"),-1!=e.indexOf("am")){var t=e.split("am");t=t[0]}else{var t=e.split("pm");t=t[0],t=parseInt(t)+12}return 0>t?(s.wind00Enable(!1),$("#wind00 > label").css("color","grey"),!0):(s.wind00Enable(!0),!1)},s.wind06Disable=function(){var e=new Date,a=(new Date,e.getHours(),moment(e));if(e=a.tz("Atlantic/Cape_Verde").format("ha z"),-1!=e.indexOf("am")){var t=e.split("am");t=t[0]}else{var t=e.split("pm");t=t[0],t=parseInt(t)+12}return 6>t?(s.wind06Enable(!1),$("#wind06 > label").css("color","grey"),!0):(s.wind06Enable(!0),!1)},s.wind12Disable=function(){var e=new Date,a=moment(e);if(e=a.tz("Atlantic/Cape_Verde").format("ha z"),-1!=e.indexOf("am")){var t=e.split("am");t=t[0]}else{var t=e.split("pm");t=t[0],t=parseInt(t)+12}return 12>t?(s.wind12Enable(!1),$("#wind12 > label").css("color","grey"),!0):(s.wind12Enable(!0),!1)},s.wind18Disable=function(){var e=new Date,a=moment(e);if(e=a.tz("Atlantic/Cape_Verde").format("ha z"),-1!=e.indexOf("am")){var t=e.split("am");t=t[0]}else{var t=e.split("pm");t=t[0],t=parseInt(t)+12}return 18>t?(s.wind18Enable(!1),$("#wind18 > label").css("color","grey"),!0):(s.wind18Enable(!0),!1)},s.months=[0,31,28,31,30,31,30,31,31,30,31,30,31],s.reportAOIs=e.observableArray([]),s.selectedAOIs=e.observableArray([]),s.reportText=e.observable(r.text.reportOptions),s.reportTextImagery=e.observable(r.text.digitalGlobeWindowText);var b=new Date,l=b.getDate(),d=b.getMonth()+1,c=b.getFullYear(),v=d+"/"+l+"/"+c,u=new Date((new Date).setDate((new Date).getDate()-7)),p=u.getDate(),m=u.getMonth()+1,f=u.getFullYear(),x=m+"/"+p+"/"+f;return s.firesPickerFrom=function(){var e=(jQuery("#firesDateFrom").datepicker({minDate:new Date(2013,0,1),maxDate:"+0M +0D",onSelect:function(e){return console.log(e),s.firesObservFrom(e),$("#firesDateTo").datepicker("option","minDate",e),e}}),new Date((new Date).setDate((new Date).getDate()-7))),a=e.getDate(),t=e.getMonth()+1,o=e.getFullYear(),r=t+"/"+a+"/"+o;return r},s.firesPickerTo=function(){var e=(jQuery("#firesDateTo").datepicker({minDate:new Date(2013,0,1),maxDate:"+0M +0D",onSelect:function(e){return s.firesObservTo(e),$("#firesDateFrom").datepicker("option","maxDate",e),e}}),new Date),a=e.getDate(),t=e.getMonth()+1,o=e.getFullYear(),r=t+"/"+a+"/"+o;return r},s.windPicker=function(){var e=(jQuery("#windDate").datepicker({minDate:new Date(2014,9,19),maxDate:"+0M +0D",beforeShowDay:function(e){var a=jQuery.datepicker.formatDate("yy-mm-dd",e),t=["2015-03-31","2015-04-01","2015-04-02","2015-04-03","2015-04-04","2015-04-05","2015-04-06","2015-04-07","2015-04-08","2015-04-09","2015-04-10","2015-04-11","2015-04-12","2015-04-13","2015-04-14","2015-04-15","2015-04-16","2015-05-06","2015-05-07"];return t.indexOf(a)>-1?!1:[-1==s.windDisabledDates.indexOf(a)]},onSelect:function(e){$("#wind06 > label").css("color","black"),$("#wind12 > label").css("color","black"),$("#wind18 > label").css("color","black");var a=Date.parse(e),t=new Date;return t.setHours(0,0,0,0),t.getTime()>a?(s.wind00Enable(!0),s.wind06Enable(!0),s.wind12Enable(!0),s.wind18Enable(!0)):(s.timeOfDay("00"),s.wind06Disable(),s.wind12Disable(),s.wind18Disable()),"01/14/2015"==e&&(s.timeOfDay("00"),s.wind18Enable(!1)),"01/16/2015"==e&&(s.timeOfDay("18"),s.wind00Enable(!1),s.wind06Enable(!1),s.wind12Enable(!1)),"03/30/2015"==e&&(s.timeOfDay("00"),s.wind12Enable(!1),s.wind18Enable(!1)),"04/17/2015"==e&&(s.timeOfDay("00"),s.wind12Enable(!1),s.wind18Enable(!1)),"05/05/2015"==e&&(s.timeOfDay("00"),s.wind06Enable(!1),s.wind12Enable(!1),s.wind18Enable(!1)),"05/08/2015"==e&&(s.timeOfDay("12"),s.wind00Enable(!1),s.wind06Enable(!1)),s.windObserv(e),e}}),new Date),a=e.getDate(),t=e.getMonth()+1,o=e.getFullYear(),r=t+"/"+a+"/"+o;return r},s.airPicker=function(){var e=(jQuery("#airDate").datepicker({minDate:new Date(2014,11,16),maxDate:"+0M +0D",beforeShowDay:function(e){var a=jQuery.datepicker.formatDate("yy-mm-dd",e),t=["2015-04-13","2015-04-14","2015-04-15","2015-04-16","2015-04-17","2015-04-18","2015-04-19","2015-04-20","2015-04-21","2015-04-22","2015-04-23","2015-04-24","2015-04-25","2015-04-26","2015-04-27","2015-04-28","2015-04-29","2015-04-30","2015-05-01","2015-05-02","2015-05-03","2015-05-04","2015-05-05","2015-05-06","2015-05-07","2015-05-08","2015-05-09","2015-05-10","2015-05-11","2015-05-12","2015-05-13","2015-05-14","2015-05-15","2015-05-16","2015-05-17","2015-05-18","2015-05-19","2015-05-20","2015-05-21","2015-05-22","2015-05-23","2015-05-24","2015-05-25","2015-05-26","2015-05-27","2015-05-28","2015-05-29","2015-05-30","2015-05-31","2015-06-01","2015-06-02","2015-06-03"];return[-1==t.indexOf(a)]},onSelect:function(e){return s.airObserv(e),e}}),new Date),a=e.getDate(),t=e.getMonth()+1,o=e.getFullYear(),r=t+"/"+a+"/"+o;return r},s.noaaPickerFrom=function(){jQuery("#noaaDateFrom").datepicker({date:new Date(2014,9,22),minDate:new Date(2014,9,22),maxDate:"+0M +0D",onSelect:function(e){return s.noaaObservFrom(e),$("#noaaDateTo").datepicker("option","minDate",e),e}})},s.noaaPickerTo=function(){var e=(jQuery("#noaaDateTo").datepicker({minDate:new Date(2014,9,22),maxDate:"+0M +0D",onSelect:function(e){return s.noaaObservTo(e),$("#noaaDateFrom").datepicker("option","maxDate",e),e}}),new Date),a=e.getDate(),t=e.getMonth()+1,o=e.getFullYear(),r=t+"/"+a+"/"+o;return r},s.indoPickerFrom=function(){jQuery("#indoDateFrom").datepicker({minDate:new Date(2013,0,1),maxDate:"+0M -7D",onSelect:function(e){return s.indoObservFrom(e),$("#indoDateTo").datepicker("option","minDate",e),e}})},s.indoPickerTo=function(){var e=(jQuery("#indoDateTo").datepicker({minDate:new Date(2013,0,1),maxDate:"+0M -7D",onSelect:function(e){return s.indoObservTo(e),$("#indoDateFrom").datepicker("option","maxDate",e),e}}),new Date((new Date).setDate((new Date).getDate()-7))),a=e.getDate(),t=e.getMonth()+1,o=e.getFullYear(),r=t+"/"+a+"/"+o;return r},s.smartOptions=e.observableArray(["Choose one","Heat map","Proportional symbols","Hex bin"]),s.firesObservFrom=e.observable(x),s.firesObservTo=e.observable(v),s.windObserv=e.observable(v),s.airObserv=e.observable(v),s.noaaObservFrom=e.observable("10/12/2014"),s.noaaObservTo=e.observable(v),s.indoObservFrom=e.observable("1/1/2013"),s.indoObservTo=e.observable(x),s.islands=e.observableArray([]),s.provinces=e.observableArray([]),s.uploadInstructions=e.observableArray(r.uploadOptions.instructions),s.drawInstructions=e.observableArray(r.text.drawInstructions),s.showBasemapGallery=e.observable(!1),s.showShareContainer=e.observable(!1),s.showReportOptions=e.observable(!1),s.showAlertContainer=e.observable(!1),s.showReportOptionsNOAA=e.observable(!1),s.showActiveFiresButtons=e.observable(!1),s.showReportOptionsINDO=e.observable(!1),s.showReportOptionsWIND=e.observable(!1),s.showReportOptionsAIR=e.observable(!1),s.showUploadTools=e.observable(!1),s.showDrawTools=e.observable(!1),s.showReportOptionsDigitalGlobe=e.observable(!1),s.showReportOptionsDigitalGlobeFootprints=e.observable(!0),s.digitalGlobeInView=e.observableArray(),s.sortedImageryArray=[],s.showLocatorWidgets=e.observable(!1),s.toggleMapPane=e.observable(!0),s.showPrimaryForestOptions=e.observable(!1),s.showWindLayerOptions=e.observable(!0),s.showWindLegend=e.observable(!1),s.showLatLongInputs=e.observable(!1),s.showDMSInputs=e.observable(!0),s.showClearPinsOption=e.observable(!1),s.currentLatitude=e.observable(0),s.currentLongitude=e.observable(0),s.DigitalGlobeExtents=e.observable([]),s.dgMoments=e.observable([]),s.valuenodes=e.observable(),s.selectedImageryID=e.observable(),s.closeReportOptions=function(){s.showReportOptions(!1),require(["views/map/MapController"],function(e){e.removeAnalysisFromHash()})},s.closeAlertsOptions=function(){s.showAlertContainer(!1)},s.closeReportOptionsNOAA=function(){s.showReportOptionsNOAA(!1)},s.closeReportOptionsINDO=function(){s.showReportOptionsINDO(!1)},s.closeReportOptionsWIND=function(){s.showReportOptionsWIND(!1)},s.closeReportOptionsAIR=function(){s.showReportOptionsAIR(!1)},s.closeReportOptionsDigitalGlobe=function(){s.showReportOptionsDigitalGlobe(!1)},s.closeOptionsNASA=function(){s.showActiveFiresButtons(!1)},s.imageryMouseOver=function(e,a){require(["views/map/MapController"],function(t){t.handleImageryOver(e,a)})},s.imageryMouseOut=function(e,a){$("#smartHiddenMenu").addClass("hidden"),require(["views/map/MapController"],function(t){t.handleImageryOut(e,a)})},s.chooseSmartDropdown=function(){var e=$("#activate-smart-checkbox");0!=e[0].checked&&require(["views/map/MapController"],function(e){e.setSmartRenderer(s.smartRendererName())})},s.imageryZoomTo=function(e,a){require(["views/map/MapController"],function(t){t.imageryZoom(e,a)})},s.digitalGlobeToggle=function(e,a){console.log("CLICK"),require(["views/map/MapController"],function(t){t.showDigitalGlobe(e,a)})},s.slidePanel=function(){var e=s.toggleMapPane();require(["views/map/MapController"],function(a){a.resizeMapPanel(e)})},s.selectImageryMinimize=function(){"table"==$("#imageryWindow > table").css("display")?($("#imageryWindow > table").css("display","none"),$("#report-optionsDigitalGlobe").css("border-bottom","none")):($("#imageryWindow > table").css("display","table"),$("#report-optionsDigitalGlobe").css("border-bottom","2px solid black"))},i.applyBindings=function(a){e.applyBindings(s,n.byId(a))},i.get=function(e){return"model"===e?i.vm:i.vm[e]()},i.set=function(e,a){i.vm[e](a)},i});